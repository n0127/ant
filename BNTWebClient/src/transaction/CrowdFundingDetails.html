<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title data-value="loging2.0_163">项目详情</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link rel="stylesheet" type="text/css" href="../../css/mui.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/index.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/PublicPassword.css"/>
	</head>
	<body>

			  <!--资产详情-->
			    <div class="PublicFixedBox">
			    	<div class="public-header" style="color: #555; border-bottom: 1px solid #d6d6d6;">
			    		<div class="return">
			    			<div class="mui-push-left"></div>
			    			<span class="loginTitle" data-value="loging2.0_163">项目详情</span>
			    		</div>
			    	</div>
			    	<div class="PublicScrollBox">
			    		<div class="mui-scroll-wrapper mui-content"  style="padding-bottom: 0;">
							<div style="padding-bottom: 0;" class="mui-scroll">
		    					<div class="CrowdFundingDetailsContent">
		    						<h3 data-value="loging2.0_164">ANT蚂蚁通证</h3>
		    						<p class="itemName">ANT token采用持有ANT token即享分红权益模式，商家将部分收益按照持有ANT数量比例分发给ANT持有者，持有ANT越多，享受权益越高。</p>
		    						<img src="../../img/CrowdFundingDetailsBg.png" />
		    						<div class="CrowdFundingDetailsContentLine">
		    							<p><span class="successAmountWidth"></span></p>
		    							<span class="successAmountText">60.00%</span>
		    						</div>
		    						<ul>
		    							<li><span data-value="loging2.0_165">总量（ANT）</span><div><span class="amount">100</span></div></li>
		    							<li><span data-value="loging2.0_166">已参与（ANT）</span><div><span class="buyedAmount">60</span></div></li>
		    							<li><span data-value="loging2.0_167">剩余天数</span><div><span class="releaseDays">35</span><span>天</span></div></li>
		    						</ul>
		    						<h3 data-value="loging2.0_168">项目介绍</h3>
		    						<p class="itemDesc">ANT token即蚂蚁通证，立足于服务实体经济、为传统行业赋能，利用通证将商户和用户连接在一起，形成一个商业大联盟，告别单打独斗，孤军奋战的时代。ANT致力于创建一个安全、高效、透明的通证经济应用系统，让商户和用户形成一个利益共同体，最终实现商户产品不愁卖，用户购买产品有折扣还能享受商户权益的互惠互利，共享共赢模式。</p>
		    						<h3 data-value="loging2.0_169">白皮书</h3>
		    						<p>http://anttoken.one/page/WhitePaper.html</p>
		    					</div>
	    						<div class="CrowdFundingDetailsContentBottom">
	    							<div>
	    								<span data-value="loging2.0_170">请输入购买数量</span>
	    								<input oninput="value=value.replace(/[^\d]/g,'')" type="text"  />
	    								<span data-value="loging2.0_171">枚</span>
	    							</div>
	    							<button data-value="loging2.0_172">立即购买</button>
	    						</div>
		    				</div>
			    		</div>
			    	</div>
			    </div>
			    
			   <div class="publicPas">
					<div>
						<div class="publicPasTitle">
							<span>私钥密码</span>
							<p class="publicPasTitleDown mui-icon mui-icon-closeempty"></p>
						</div>
						<div class="publicPasInput">
							<p>私钥密码</p>
							<input type="password" placeholder="请输入来源地址对应的私钥密码" />
						</div>
						<div class="publicPasBut">
							<button>确认发送</button>
						</div>
					</div>
				</div>
			  
	</body>
</html>
<script type="text/javascript" src="../../js/jquery-3.3.1.min.js" ></script>
<script type="text/javascript" src="../../js/mui.js" ></script>
<script type="text/javascript" src="../../js/rem.js" ></script>
<script type="text/javascript" src="../../js/LanguagePackage.js" ></script>
<script type="text/javascript" src="../../js/language.js" ></script>
<script type="text/javascript" src="../../js/ajax.js" ></script>
<script src="http://bnt.fuyer.com/js/ethers-v4.min.js" charset="utf-8" type="text/javascript"></script>
<script type="text/javascript" src="../../js/sha1.js" ></script>
<script>
	var userId;
	var token;
	var offset=0;
	var id=GetQueryString("id")
	
	if(hehe==undefined){
		userId=sessionStorage.getItem("userId")
		token=sessionStorage.getItem("token")
		DetailContent()
	}
	
	if(localStorage.getItem("set-lan")=="EN"){
		language="EN"
		languageArr=EN
	}else{
		language="CN"
		languageArr=CN
	}
		
	//Dapp
	function DAPPFrameworkEngineReady(){
		DAPPFramework.View.SetScrollEnabled(false);
		userId=DAPPFramework.Storage.Get("userId")
		token=DAPPFramework.Storage.Get("token")
		id666=DAPPFramework.Storage.Get("VurrentValue")
		DetailContent()
	}	
		
	function DetailContent(){		
		getZhongChouDetail(userId,token,id,language)
		$(".amount").text(getZhongChouDetailArr.data.amount)
		$(".buyedAmount").text(getZhongChouDetailArr.data.buyedAmount)
		$(".releaseDays").text((getZhongChouDetailArr.data.endTime-getZhongChouDetailArr.data.startTime)/60/60/24)
		
		$(".successAmountWidth").css("width",(Number(getZhongChouDetailArr.data.successRatio)*10000*100/10000).toFixed(2)+"%")
		$(".successAmountText").text((Number(getZhongChouDetailArr.data.successRatio)*10000*100/10000).toFixed(2)+"%")
		$(".itemName").text(getZhongChouDetailArr.data.itemName)
		$(".itemDesc").html(getZhongChouDetailArr.data.itemDesc.replace(/\n/g,"<br>"))
	}
	
	
	
	
	$(".CrowdFundingDetailsContentBottom").on("tap","button",function(){
		if($(".CrowdFundingDetailsContentBottom input").val()!=""){
			$(".CrowdFundingDetailsContentBottom input").blur()
			$(".publicPas").fadeIn()
		}else{
			alert("购买数量不得为空")
		}
	})
	
	$(".publicPasBut").on("tap","button",function(){
		var value=$(".duihuanipt").val();
		var password=$(".publicPasInput>input").val();
		var PrivateKeyJosn=JSON.parse(DAPPFramework.Storage.Get("PrivateKeyJosn"));
		var privateKey=PrivateKeyJosn[id666].privateKey;
		var wallet=new ethers.Wallet(privateKey);
		var Time=new Date().getTime();
		var Password=PrivateKeyJosn[id666].Password;
		if( Password == sha256_digest(password) ){			
			wallet.signMessage(sha256_digest(Time+token)).then(signature => {
				buyZhongChou(userId,token,id,$(".CrowdFundingDetailsContentBottom input").val(),signature,Time)
				if(buyZhongChouArr.code==1){
					alert("购买成功")
					window.location.reload()
				}else{
					$(".publicPasInput>input").val("");
					alert(buyZhongChouArr.message)
				}
			})
		}else{
			alert(languageArr["loging2.0_201"])
		}
		
	})
	
	$('.publicPasTitleDown').on('tap',function () {
		$('.publicPas').fadeOut();
		$(".publicPasInput>input").val("");
	})
	
	
</script>